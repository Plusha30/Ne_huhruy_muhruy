<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Сравнение {{ category_name }}</title>
  <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='images/index_icon.ico') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/comparison_styles.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
  <header class="site-header" style="background:transparent; box-shadow:none; padding-top:22px;">
    <div class="header-inner">
      <a class="logo" href="{{ url_for('index') }}" aria-label="EliteDrive — на главную">
        <img src="{{ url_for('static', filename='images/logo-negate.png') }}" alt="EliteDrive Logo" class="logo-img" style="height:46px;">
        <strong class="logo-text">EliteDrive</strong>
      </a>
    </div>
  </header>

  <main class="compare-category-page" role="main" aria-labelledby="compare-title">
    <h1 id="compare-title" class="compare-title">Сравнение — {{ category_name }}</h1>

    <table class="comparison-table" role="table" aria-label="Таблица сравнения {{ category_name }}">
      <thead>
        <tr>
          <th scope="col">Параметр</th>
          {% for product in products %}
          <th scope="col" class="product-header">
            <img src="{{ url_for('static', filename='images/' + product.images[0]) }}" alt="{{ product.name }}">
            <div class="product-name">{{ product.name }}</div>
            <div class="product-price">${{ "{:,}".format(product.price) }}</div>
          </th>
          {% endfor %}
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="spec-name">Наличие</td>
          {% for product in products %}
          <td class="spec-value">В наличии: {{ product.stock }} шт.</td>
          {% endfor %}
        </tr>
        
        {% for spec in all_specs %}
        <tr>
          <td class="spec-name">{{ spec }}</td>
          {% for product in products %}
          <td class="spec-value">
            {% if product.specs and spec in product.specs %}
              {{ product.specs[spec] }}
            {% else %}
              —
            {% endif %}
          </td>
          {% endfor %}
        </tr>
        {% endfor %}
        
        <tr>
          <td class="spec-name">Действия</td>
          {% for product in products %}
          <td>
            <a href="{{ url_for('product_detail', product_id=product.id) }}" class="btn primary" style="padding: 8px 12px; font-size: 0.9rem;">Подробнее</a>
          </td>
          {% endfor %}
        </tr>
      </tbody>
    </table>
  </main>

  <footer class="site-footer minimal" role="contentinfo" style="margin-top:36px;">
    <div class="footer-inner">
      <a href="{{ url_for('create_category_page', category=category) }}" style="color:inherit; text-decoration:none;">← в категорию {{ category_name }}</a>
      <p class="author" style="margin:0 0 0 12px; color:#9aa1b2;">© 2025 EliteDrive — разработчик: Кузнецов Дмитрий</p>
    </div>
  </footer>
</body>
</html>