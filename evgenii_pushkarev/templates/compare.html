{% extends "base.html" %}

{% block title %}–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ - RetroArcade{% endblock %}

{% block extra_css %}
<style>
    /* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å—Ä–∞–≤–Ω–µ–Ω–∏—è */
    .compare-container {
        background: white;
        border-radius: var(--radius);
        padding: 20px;
        box-shadow: var(--shadow);
        margin: 20px 0;
        overflow: hidden;
    }

    .page-header {
        text-align: center;
        margin-bottom: 25px;
    }

    .page-title {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--dark);
        margin-bottom: 8px;
        line-height: 1.3;
    }

    .page-subtitle {
        color: var(--gray);
        font-size: 0.9rem;
    }

    .compare-controls {
        display: flex;
        flex-direction: column;
        gap: 15px;
        margin-bottom: 25px;
        padding: 15px;
        background: var(--gray-light);
        border-radius: var(--radius);
    }

    .products-selected {
        display: flex;
        align-items: center;
        gap: 10px;
        font-weight: 600;
        flex-wrap: wrap;
    }

    .selected-count {
        background: var(--primary);
        color: white;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.9rem;
        flex-shrink: 0;
    }

    .compare-actions {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
    }

    /* –¢–∞–±–ª–∏—Ü–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è */
    .compare-table-wrapper {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        border-radius: var(--radius);
        border: 1px solid var(--gray-light);
        margin: 0 -20px;
        width: calc(100% + 40px);
        position: relative;
    }

    .compare-table {
        width: 100%;
        border-collapse: collapse;
        min-width: 800px;
    }

    .compare-table th, .compare-table td {
        padding: 12px 10px;
        text-align: left;
        border-bottom: 1px solid var(--gray-light);
        vertical-align: top;
        font-size: 0.9rem;
    }

    .compare-table th {
        background: var(--gray-light);
        font-weight: 600;
        color: var(--dark);
        position: sticky;
        top: 0;
        z-index: 2;
    }

    /* –ü–µ—Ä–≤—ã–µ —è—á–µ–π–∫–∏ –≤ —Å—Ç—Ä–æ–∫–∞—Ö sticky */
    .compare-table tr > *:first-child {
        position: sticky;
        left: 0;
        background: white;
        z-index: 1;
        box-shadow: 2px 0 5px rgba(0, 0, 0, 0.05);
    }

    /* –ó–∞–≥–æ–ª–æ–≤–∫–∏ –≥—Ä—É–ø–ø —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ */
    .compare-table td[colspan] {
        background: var(--gray-light) !important;
        z-index: 3 !important;
        box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1) !important;
        font-weight: 600;
        color: var(--dark);
        padding: 16px 10px !important;
        border-top: 2px solid var(--gray-dark);
        border-bottom: 2px solid var(--gray-dark);
    }

    /* –ü–µ—Ä–≤—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–∞–±–ª–∏—Ü—ã */
    .compare-table thead th:first-child {
        z-index: 5;
        background: var(--gray-light);
    }

    /* –û–±—ã—á–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ */
    .compare-table th.feature-name {
        background: var(--gray-light);
        z-index: 4;
    }

    /* –£–ª—É—á—à–∞–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–∏ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–µ */
    .compare-table td:first-child {
        min-width: 150px;
        max-width: 200px;
        word-wrap: break-word;
        background: white;
    }

    /* –ü—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ —Å—Ç—Ä–æ–∫—É */
    .compare-table tbody tr:hover td:first-child {
        background: rgba(74, 111, 165, 0.03);
    }

    .product-column {
        width: 250px;
        min-width: 200px;
        background: white;
        border-right: 1px solid var(--gray-light);
    }

    .product-header {
        text-align: center;
        padding: 15px;
        border-bottom: 1px solid var(--gray-light);
    }

    .product-image {
        width: 100px;
        height: 100px;
        object-fit: contain;
        margin: 0 auto 12px;
        border-radius: 8px;
        background: var(--gray-light);
        padding: 8px;
    }

    .product-title {
        font-size: 1rem;
        font-weight: 700;
        color: var(--dark);
        margin-bottom: 6px;
        line-height: 1.3;
    }

    .product-price {
        font-size: 1.2rem;
        font-weight: 700;
        color: var(--primary);
        margin-bottom: 12px;
    }

    .product-actions {
        display: flex;
        flex-direction: column;
        gap: 8px;
    }

    .product-actions .btn {
        width: 100%;
        justify-content: center;
        padding: 8px;
        font-size: 0.8rem;
    }

    .feature-cell {
        font-size: 0.85rem;
        color: var(--gray-dark);
    }

    .feature-cell.yes {
        color: var(--success);
        font-weight: 600;
    }

    .feature-cell.no {
        color: var(--danger);
        font-weight: 600;
    }

    .feature-cell.na {
        color: var(--gray);
        font-style: italic;
    }

    .empty-compare {
        text-align: center;
        padding: 40px 15px;
    }

    .empty-icon {
        font-size: 3rem;
        color: var(--gray-light);
        margin-bottom: 15px;
    }

    .empty-title {
        font-size: 1.3rem;
        color: var(--dark);
        margin-bottom: 8px;
    }

    .empty-text {
        color: var(--gray);
        margin-bottom: 25px;
        font-size: 0.95rem;
    }

    .recommendations {
        margin-top: 30px;
        padding-top: 25px;
        border-top: 1px solid var(--gray-light);
    }

    .recommendations-title {
        font-size: 1.2rem;
        font-weight: 600;
        color: var(--dark);
        margin-bottom: 15px;
        text-align: center;
    }

    /* –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏: –Ω–∞ –ü–ö - 4 –∫–æ–ª–æ–Ω–∫–∏, –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö - 2 */
    .recommendations .products-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 20px;
    }

    .product-image-small {
        height: 140px;
        background: linear-gradient(135deg, #f1f3f5, #e9ecef);
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
    }

    .product-image-small img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .product-info-small {
        padding: 15px;
    }

    .product-title-small {
        font-size: 0.95rem;
        font-weight: 600;
        margin-bottom: 8px;
        color: var(--dark);
        line-height: 1.4;
    }

    .product-price-small {
        font-size: 1.1rem;
        font-weight: 700;
        color: var(--primary);
        margin-bottom: 10px;
    }

    /* –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è */
    .best-value {
        position: relative;
        background: linear-gradient(135deg, rgba(255, 193, 7, 0.1), rgba(255, 193, 7, 0.05));
    }

    .best-value::before {
        content: 'üèÜ –õ—É—á—à–µ–µ';
        position: absolute;
        top: 10px;
        right: 10px;
        background: var(--warning);
        color: var(--dark);
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.7rem;
        font-weight: 600;
        z-index: 1;
    }

    .highlight {
        background: rgba(40, 167, 69, 0.1);
        font-weight: 600;
    }

    .warning {
        background: rgba(255, 193, 7, 0.1);
        font-weight: 600;
    }

    /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è */
    @media (max-width: 1200px) {
        .recommendations .products-grid {
            grid-template-columns: repeat(3, 1fr);
        }
    }

    @media (max-width: 992px) {
        .recommendations .products-grid {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    @media (max-width: 768px) {
        .compare-table-wrapper {
            margin: 0 -15px;
            width: calc(100% + 30px);
        }

        .compare-table th, .compare-table td {
            padding: 10px 8px;
            font-size: 0.85rem;
        }

        .compare-table td:first-child,
        .compare-table td[colspan] {
            min-width: 120px;
            max-width: 150px;
            font-size: 0.85rem;
            padding: 12px 8px !important;
        }

        .compare-table th:first-child {
            min-width: 120px;
            max-width: 150px;
        }

        .product-column {
            width: 200px;
            min-width: 180px;
        }

        .product-image {
            width: 80px;
            height: 80px;
        }

        .product-title {
            font-size: 0.95rem;
        }

        .product-price {
            font-size: 1.1rem;
        }

        .recommendations .products-grid {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    @media (max-width: 576px) {
        .compare-container {
            padding: 15px;
        }

        .page-title {
            font-size: 1.3rem;
        }

        .compare-controls {
            padding: 12px;
        }

        .products-selected {
            justify-content: center;
            text-align: center;
        }

        .compare-actions {
            width: 100%;
        }

        .compare-actions .btn {
            flex: 1;
            min-width: 140px;
            justify-content: center;
        }

        .compare-table td:first-child,
        .compare-table td[colspan] {
            min-width: 100px;
            max-width: 130px;
            font-size: 0.8rem;
            padding: 10px 6px !important;
        }

        .compare-table th:first-child {
            min-width: 100px;
            max-width: 130px;
            font-size: 0.85rem;
        }

        .empty-compare .btn {
            width: 100%;
            margin-bottom: 8px;
            justify-content: center;
        }

        .compare-table {
            min-width: 700px;
        }

        .product-column {
            width: 180px;
            min-width: 160px;
        }
    }

    @media (max-width: 480px) {
        .page-title {
            font-size: 1.2rem;
        }

        .page-subtitle {
            font-size: 0.85rem;
        }

        .product-actions {
            gap: 6px;
        }

        .product-actions .btn {
            font-size: 0.75rem;
            padding: 6px;
        }

        .feature-cell {
            font-size: 0.8rem;
        }

        .compare-table td:first-child {
            font-size: 0.75rem;
            min-width: 90px;
            max-width: 120px;
        }

        .recommendations .products-grid {
            grid-template-columns: 1fr;
            gap: 15px;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="compare-container">
    <div class="page-header">
        <h1 class="page-title">–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤</h1>
        <p class="page-subtitle">–°—Ä–∞–≤–Ω–∏—Ç–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Ä–∞–∑–Ω—ã—Ö –∏–≥—Ä–æ–≤—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–æ–≤ –¥–ª—è –≤—ã–±–æ—Ä–∞ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞</p>
    </div>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert alert-{{ 'success' if category == 'success' else 'error' if category == 'error' else 'info' }}">
                    <i class="fas fa-{{ 'check-circle' if category == 'success' else 'exclamation-circle' if category == 'error' else 'info-circle' }}"></i>
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <div class="compare-controls">
        <div class="products-selected">
            <div class="selected-count">{{ compare_products|length }}</div>
            <span>–¢–æ–≤–∞—Ä–æ–≤ –≤—ã–±—Ä–∞–Ω–æ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è</span>
        </div>

        <div class="compare-actions">
            <a href="{{ url_for('index') }}" class="btn btn-outline">
                <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä
            </a>
            <a href="{{ url_for('clear_compare_route') }}" class="btn btn-primary"
               onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—á–∏—Å—Ç–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è?');">
                <i class="fas fa-trash"></i> –û—á–∏—Å—Ç–∏—Ç—å
            </a>
        </div>
    </div>

    {% if compare_products %}
        <div class="compare-table-wrapper">
            <table class="compare-table">
                <thead>
                    <tr>
                        <th class="product-column feature-name">–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞</th>
                        {% for product in compare_products %}
                        <th class="product-column {% if loop.index == 2 %}best-value{% endif %}">
                            <div class="product-header">
                                <img src="{{ url_for('static', filename=product.image) }}"
                                     alt="{{ product.name }}"
                                     class="product-image"
                                     onerror="this.onerror=null; this.src='https://images.unsplash.com/photo-1534423861386-85a16f5d13fd?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80';">
                                <h3 class="product-title">{{ product.name }}</h3>
                                <div class="product-price">{{ product.price }} ‚ÇΩ</div>
                                <div class="product-actions">
                                    <a href="{{ url_for('product_page', product_id=product.id) }}" class="btn btn-outline">
                                        <i class="fas fa-eye"></i> –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                                    </a>
                                    <button class="btn btn-primary" onclick="addToCart('{{ product.id }}')">
                                        <i class="fas fa-cart-plus"></i> –í –∫–æ—Ä–∑–∏–Ω—É
                                    </button>
                                </div>
                            </div>
                        </th>
                        {% endfor %}
                    </tr>
                </thead>
                <tbody>
                    <!-- –û—Å–Ω–æ–≤–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ -->
                    <tr>
                        <td class="feature-name">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</td>
                        {% for product in compare_products %}
                        <td class="feature-cell">{{ product.category_name }}</td>
                        {% endfor %}
                    </tr>
                    <tr>
                        <td class="feature-name">–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å</td>
                        {% for product in compare_products %}
                        <td class="feature-cell">{{ product.manufacturer }}</td>
                        {% endfor %}
                    </tr>
                    <tr>
                        <td class="feature-name">–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞</td>
                        {% for product in compare_products %}
                        <td class="feature-cell {% if product.year|int >= 2000 %}highlight{% endif %}">
                            {{ product.year }}
                        </td>
                        {% endfor %}
                    </tr>
                    <tr>
                        <td class="feature-name">–¶–µ–Ω–∞</td>
                        {% for product in compare_products %}
                        <td class="feature-cell {% if product.price == compare_products|map(attribute='price')|min %}highlight{% endif %}">
                            {{ product.price }} ‚ÇΩ
                        </td>
                        {% endfor %}
                    </tr>

                    <!-- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ -->
                    <tr>
                        <td class="feature-name" colspan="{{ compare_products|length + 1 }}">
                            <strong>–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</strong>
                        </td>
                    </tr>
                    <tr>
                        <td class="feature-name">–ì–∞–±–∞—Ä–∏—Ç—ã</td>
                        {% for product in compare_products %}
                        <td class="feature-cell">{{ product.dimensions or "‚Äî" }}</td>
                        {% endfor %}
                    </tr>
                    <tr>
                        <td class="feature-name">–í–µ—Å</td>
                        {% for product in compare_products %}
                        <td class="feature-cell {% if product.weight and '–∫–≥' in product.weight and product.weight.split('–∫–≥')[0]|float < 100 %}highlight{% endif %}">
                            {{ product.weight or "‚Äî" }}
                        </td>
                        {% endfor %}
                    </tr>
                    <tr>
                        <td class="feature-name">–≠–∫—Ä–∞–Ω</td>
                        {% for product in compare_products %}
                        <td class="feature-cell">{{ product.screen or "‚Äî" }}</td>
                        {% endfor %}
                    </tr>
                    <tr>
                        <td class="feature-name">–ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ</td>
                        {% for product in compare_products %}
                        <td class="feature-cell">{{ product.voltage or "‚Äî" }}</td>
                        {% endfor %}
                    </tr>

                    <!-- –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è -->
                    <tr>
                        <td class="feature-name" colspan="{{ compare_products|length + 1 }}">
                            <strong>–°–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è</strong>
                        </td>
                    </tr>
                    <tr>
                        <td class="feature-name">–°–æ—Å—Ç–æ—è–Ω–∏–µ</td>
                        {% for product in compare_products %}
                        <td class="feature-cell yes">
                            <i class="fas fa-check-circle"></i> –û—Ç–ª–∏—á–Ω–æ–µ
                        </td>
                        {% endfor %}
                    </tr>
                    <tr>
                        <td class="feature-name">–í –Ω–∞–ª–∏—á–∏–∏</td>
                        {% for product in compare_products %}
                        <td class="feature-cell {% if product.in_stock > 0 %}yes{% else %}no{% endif %}">
                            {% if product.in_stock > 0 %}
                                <i class="fas fa-check-circle"></i> –î–∞ ({{ product.in_stock }} —à—Ç.)
                            {% else %}
                                <i class="fas fa-times-circle"></i> –ù–µ—Ç
                            {% endif %}
                        </td>
                        {% endfor %}
                    </tr>
                    <tr>
                        <td class="feature-name">–ì–∞—Ä–∞–Ω—Ç–∏—è</td>
                        {% for product in compare_products %}
                        <td class="feature-cell yes">
                            <i class="fas fa-check-circle"></i> 12 –º–µ—Å—è—Ü–µ–≤
                        </td>
                        {% endfor %}
                    </tr>
                    <tr>
                        <td class="feature-name">–ö–æ–º–ø–ª–µ–∫—Ç—É—é—â–∏–µ</td>
                        {% for product in compare_products %}
                        <td class="feature-cell">
                            {% if product.components %}
                                {{ product.components[:40] }}{% if product.components|length > 40 %}...{% endif %}
                            {% else %}
                                –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è
                            {% endif %}
                        </td>
                        {% endfor %}
                    </tr>

                    <!-- –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ -->
                    <tr>
                        <td class="feature-name" colspan="{{ compare_products|length + 1 }}">
                            <strong>–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏</strong>
                        </td>
                    </tr>
                    <tr>
                        <td class="feature-name">–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏</td>
                        {% for product in compare_products %}
                        <td class="feature-cell">
                            {% if product.features %}
                                {{ product.features[:50] }}{% if product.features|length > 50 %}...{% endif %}
                            {% else %}
                                –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –∞–≤—Ç–æ–º–∞—Ç
                            {% endif %}
                        </td>
                        {% endfor %}
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ -->
        <div class="recommendations">
            <h3 class="recommendations-title">–ù–∞—à–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h3>
            <div class="products-grid">
                {% for product in compare_products %}
                <div class="product-card">
                    <div class="product-image-small">
                        <img src="{{ url_for('static', filename=product.image) }}"
                             alt="{{ product.name }}"
                             onerror="this.onerror=null; this.src='https://images.unsplash.com/photo-1534423861386-85a16f5d13fd?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80';">
                    </div>
                    <div class="product-info-small">
                        <h4 class="product-title-small">{{ product.name }}</h4>
                        <div class="product-price-small">{{ product.price }} ‚ÇΩ</div>
                        <div style="display: flex; gap: 8px;">
                            <a href="{{ url_for('product_page', product_id=product.id) }}" class="btn btn-outline" style="flex: 1; font-size: 0.8rem; padding: 6px;">
                                –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                            </a>
                            <button class="btn btn-primary" onclick="addToCart('{{ product.id }}')" style="flex: 1; font-size: 0.8rem; padding: 6px;">
                                –í –∫–æ—Ä–∑–∏–Ω—É
                            </button>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>

    {% else %}
        <!-- –ï—Å–ª–∏ –Ω–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è -->
        <div class="empty-compare">
            <div class="empty-icon">
                <i class="fas fa-balance-scale"></i>
            </div>
            <h3 class="empty-title">–ù–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è</h3>
            <p class="empty-text">
                –î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö —Ç–æ–≤–∞—Ä–æ–≤, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –∏—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Ä—è–¥–æ–º.
                –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º —Å–¥–µ–ª–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–±–æ—Ä!
            </p>
            <div style="display: flex; flex-direction: column; gap: 10px; align-items: center;">
                <a href="{{ url_for('index') }}" class="btn btn-primary" style="width: 100%; max-width: 250px; justify-content: center;">
                    <i class="fas fa-shopping-bag"></i> –ü–µ—Ä–µ–π—Ç–∏ –∫ –ø–æ–∫—É–ø–∫–∞–º
                </a>
                <a href="{{ url_for('index') }}?category=classic" class="btn btn-outline" style="width: 100%; max-width: 250px; justify-content: center;">
                    <i class="fas fa-gamepad"></i> –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ –∞–≤—Ç–æ–º–∞—Ç—ã
                </a>
                <a href="{{ url_for('index') }}?category=pinball" class="btn btn-outline" style="width: 100%; max-width: 250px; justify-content: center;">
                    <i class="fas fa-bowling-ball"></i> –ü–∏–Ω–±–æ–ª-–º–∞—à–∏–Ω—ã
                </a>
            </div>
        </div>
    {% endif %}
</div>
{% endblock %}

{% block extra_js %}
<script>
    // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –ª—É—á—à–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π
    document.addEventListener('DOMContentLoaded', function() {
        const priceCells = document.querySelectorAll('td.feature-cell:nth-child(2)');
        let minPrice = Infinity;
        let minPriceCell = null;

        priceCells.forEach(cell => {
            const priceText = cell.textContent.replace(' ‚ÇΩ', '').trim();
            const price = parseInt(priceText.replace(/\s/g, ''));
            if (price < minPrice) {
                minPrice = price;
                minPriceCell = cell;
            }
        });

        if (minPriceCell) {
            minPriceCell.classList.add('highlight');
            minPriceCell.innerHTML = 'üèÜ ' + minPriceCell.innerHTML;
        }

        // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã
        const tableRows = document.querySelectorAll('.compare-table tbody tr');
        tableRows.forEach((row, index) => {
            setTimeout(() => {
                row.style.opacity = '0';
                row.style.transform = 'translateY(10px)';
                row.style.transition = 'opacity 0.3s ease, transform 0.3s ease';

                setTimeout(() => {
                    row.style.opacity = '1';
                    row.style.transform = 'translateY(0)';
                }, 50);
            }, index * 50);
        });
    });
</script>
{% endblock %}