<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Школьная Столовая{% endblock %}</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/common/icon.png') }}">
</head>

<body style="min-height: 100vh; margin: 0; display: flex; flex-direction: column;">

    <!-- Навигация (Обычная, НЕ фиксированная) -->
    <!-- Навигация (Обычная, НЕ фиксированная) -->
    <header class="container pt-3 mb-4">
        <nav class="navbar navbar-expand-lg navbar-floating w-100 mx-auto" id="two">
            <div class="container-fluid">

                <!-- Логотип - теперь кликабельный -->
                <a href="{{ url_for('landing') }}" class="navbar-brand fw-bold d-flex align-items-center gap-2 text-decoration-none text-dark">
                    <div class="bg-primary rounded-circle" style="width: 10px; height: 10px;"></div>
                    ШколПит
                </a>

                <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse"
                        data-bs-target="#navContent">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse justify-content-center" id="navContent">
                    <ul class="navbar-nav gap-1 gap-lg-4 text-center my-3 my-lg-0 align-items-center">
                        <li class="nav-item"><a class="nav-link text-dark fw-medium"
                                                href="{{ url_for('landing') }}">Главная</a></li>

                        <!-- КНОПКА "Заказать питание" -->
                        {% if rights == 0 or rights == 1 %}
                        <li class="nav-item">
                            <a class="nav-link text-dark fw-medium" href="{{ url_for('dashboard') }}">
                                Заказать питание
                            </a>
                        </li>
                        {% endif %}

                        {% if rights > 1 %}
                        <li class="nav-item">
                            <a class="nav-link text-dark fw-medium" href="{{ url_for('dashboard') }}">
                                {% if rights == 2 %}Кухня{% endif %}
                                {% if rights == 3 %}Админ-панель{% endif %}
                            </a>
                        </li>
                        {% endif %}

                        {% if rights == 1 %}
                        <li class="nav-item"><a class="nav-link text-dark fw-medium"
                                                href="{{ url_for('pricing') }}">Абонементы</a></li>
                        {% endif %}
                    </ul>
                </div>

                <!-- Правая часть -->
                <div class="d-none d-lg-flex align-items-center gap-2">
                    {% if username == "Log in" %}
                    <a href="{{ url_for('choose') }}"
                       class="btn btn-sm btn-white border shadow-sm btn-pill px-3">Войти</a>
                    <a href="{{ url_for('register') }}" class="btn btn-sm btn-outline-primary btn-pill px-3"
                       style="border-width: 1px;">Регистрация</a>
                    {% else %}
                    <a href="{{ url_for('profile') }}"
                       class="d-flex align-items-center text-decoration-none text-dark gap-2">
                        <img src="{{ url_for('static', filename=userimg) }}" alt="User"
                             class="rounded-circle border bg-light"
                             style="width: 40px; height: 40px; object-fit: cover;">
                        {% if username|length > 30 %}
                        <span class="fw-bold">{{ username[:30] }}...</span>
                        {% else %}
                        <span class="fw-bold">{{ username }}</span>
                        {% endif %}
                    </a>
                    {% endif %}
                </div>
            </div>
        </nav>
    </header>

    <!-- Убрали navbar-spacer, так как шапка теперь занимает место в потоке -->

    <main style="flex: 1;" id="one">
        {% block content %}{% endblock %}
    </main>

    <!-- Обновленный футер -->
<footer class="py-4 mt-auto text-center text-lg-start border-top bg-white" style="flex-shrink: 0;">
    <div class="container">
        <div class="row align-items-center">
            <!-- Левая часть - копирайт -->
            <div class="col-lg-6 mb-4 mb-lg-0">
                <p class="text-muted mb-0 small">&copy; 2026 Школьная Столовая.</p>
                <p class="text-muted mb-0 small"><strong>За авторством:</strong><br>
                            Иван Беззубцев,
                            Евгений Пушкарёв,
                            Денис Ушаков,
                            Дмитрий Кузнецов,
                            Кирилл Артимович</p>
            </div>
            
            <!-- Правая часть - авторы и GitHub -->
            <div class="col-lg-6 text-lg-end">
                <div class="d-flex flex-column align-items-lg-end gap-2">
                    <!-- GitHub логотип -->
                    <a href="https://github.com/NNeonnn/Brains_are_working" target="_blank" rel="noopener noreferrer" 
                       class="d-inline-flex align-items-center gap-2 text-decoration-none text-dark">
                        <img src="{{ url_for('static', filename='images/common/github_logo.png') }}" style="width: 65px; height: 65px;"></img>
                    </a>
                </div>
            </div>
        </div>
    </div>
</footer>

    <!-- Скрипты -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    {% block scripts %}{% endblock %}
</body>

<script>
    function setWidth() {
        var one = document.getElementById("one");
        var two = document.getElementById("two");
        style = window.getComputedStyle(one);
        wdt = style.getPropertyValue('width');
        two.style.width = wdt;
    }
</script>

</html>